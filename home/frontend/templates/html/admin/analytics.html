{% extends "html/index.html" %}

{% load static %}

{% block main_content %}
<div class="row mt-2">
    <div class="col">
        <h2 class="text-primary">Analytics</h2>
        <ul class="nav nav-tabs mt-4" id="competencies-tabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="add-training-tab" data-toggle="tab" href="#runAnalyzes" role="tab">Analyze</a>
            </li>
        </ul>
        <div class="tab-content m-2" id="myTabContent">
            <div class="tab-pane  show active" id="runAnalyzes" role="tabpanel">
                <div class="row">
                    <div class="col">
                        <form id="analyze-form" method="POST" action="/analytics/compute">
                            {% csrf_token %}
                            <label for="employeesSelect">Select employee/s:</label>
                            <div class="form-group row align-items-center">
                                <div class="col">
                                    <select class="form-control" multiple name="employeesSelect" id="employeesSelect">
                                    {% for obj in employees %}
                                        <option>{{obj.first_name}} {{obj.last_name}} ({{obj.id_workplace.name}})</option>
                                    {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto">
                                    <button type="button" class="btn btn-primary" id="selectAllEmployees">SELECT ALL</button>
                                </div>
                            </div>
                            <p>Select at least one of the Algorithms:</p>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="algo1" id="algo1">
                                <label class="form-check-label" for="algo1">Algorithm 1</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="algo2" id="algo2">
                                <label class="form-check-label" for="algo2">Algorithm 2</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="algo3" id="algo3">
                                <label class="form-check-label" for="algo3">Algorithm 3</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="algo4" id="algo4">
                                <label class="form-check-label" for="algo4">Algorithm 4</label>
                            </div>
                            <div class="text-right">
                                <button type="submit" class="btn btn-primary">ANALYZE</button>
                            </div>
                        </form>
                        <hr>
                        <h4>Results</h4>
                        {% include 'html/admin/partial_table_analytics.html' %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock main_content %}


{% block scripts %}
<script>

var data = [];

$("#employeesSelect").select2({data: data});

//button event to select all employees using the select2
$("#selectAllEmployees").on("click", function(){
    $('#employeesSelect').select2('destroy').find('option').prop('selected', 'selected').end().select2();
});

</script>
{% endblock scripts %}